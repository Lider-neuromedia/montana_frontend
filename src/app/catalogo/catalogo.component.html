<app-header></app-header>

<div class="workplace">
    <div class="slide-menu">
        <app-menu></app-menu>
    </div>
    <div class="area" (click)="hideActions()">

        <app-drawer-rigth name="create-catalogo" title="Nuevo catálogo" [open]="openDrawer" (close)="openDrawerRigth(false, 'create')" (submit)="submitCreateCat()">
            <form action="">
                <div class="label-field">
                    <label for="">Nombres</label>
                    <input [(ngModel)]="catalogo.nombre" name="name" type="text" class="">
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="label-field">
                            <label for="">Descuento</label>
                            <mat-form-field appearance="fill">
                                <mat-label>Descuento</mat-label>
                                <mat-select name="food" [(ngModel)]="catalogo.descuento">
                                    <mat-option *ngFor="let num of [].constructor(100); let i = index;" [value]="i+1">
                                        {{i + 1}}%
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="label-field">
                            <label for="">Estado del cátalogo</label>
                            <mat-button-toggle-group [(ngModel)]="catalogo.estado" name="estado" aria-label="Estado">
                                <mat-button-toggle checked="true" value="activo">Activo</mat-button-toggle>
                                <mat-button-toggle value="privado">Privado</mat-button-toggle>
                            </mat-button-toggle-group>
                        </div>
                    </div>
                </div>

                <div class="label-field">
                    <label for="">Imagen destacada</label>
                    <div class="custom-dropzone" ngx-dropzone [accept]="'image/*'" [multiple]="false" (change)="onSelect($event)">
                        <ngx-dropzone-label>
                            <div>
                                <h2>My custom dropzone</h2>
                            </div>
                        </ngx-dropzone-label>
                        <ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files" [file]="f" [removable]="true" (removed)="onRemove(f)">
                            <ngx-dropzone-label>({{ f.type }})</ngx-dropzone-label>
                        </ngx-dropzone-image-preview>
                    </div>
                </div>
            </form>
        </app-drawer-rigth>

        <app-drawer-rigth name="update-catalogo" title="Editar catálogo" [open]="updateDrawer" (close)="openDrawerRigth(false, 'edit')" (submit)="submitCreateCat()">
            <form action="">
                <div class="label-field">
                    <label for="">Nombres</label>
                    <input [(ngModel)]="catalogoEdit.titulo" name="name" type="text" class="">
                    <!-- <small style="color: red;">{{ errors.name }}</small> -->
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="label-field">
                            <label for="">Descuento</label>
                            <mat-form-field appearance="outline">
                                <mat-label>Descuento</mat-label>
                                <mat-select name="food" [(ngModel)]="catalogoEdit.descuento">
                                    <mat-option *ngFor="let num of [].constructor(100); let i = index;" [value]="i+1">
                                        {{i + 1}}%
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="label-field">
                            <label for="">Estado del cátalogo</label>
                            <mat-button-toggle-group [(ngModel)]="catalogoEdit.estado" name="estado" aria-label="Estado">
                                <mat-button-toggle checked="true" value="activo">Activo</mat-button-toggle>
                                <mat-button-toggle value="privado">Privado</mat-button-toggle>
                            </mat-button-toggle-group>
                        </div>
                    </div>
                </div>

                <div class="label-field">
                    <label for="">Imagen destacada</label>
                    <div class="custom-dropzone" ngx-dropzone [accept]="'image/*'" [multiple]="false" (change)="onSelect($event)">
                        <ngx-dropzone-label>
                            <div>
                                <h2>My custom dropzone</h2>
                            </div>
                        </ngx-dropzone-label>
                        <ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files" [file]="f" [removable]="true" (removed)="onRemove(f)">
                            <img src="{{catalogoEdit.imagen}}">
                            <ngx-dropzone-label>({{ f.type }})</ngx-dropzone-label>
                        </ngx-dropzone-image-preview>
                    </div>
                </div>
            </form>
        </app-drawer-rigth>

        <div class="row">
            <div class="filtros" style="margin-bottom: 15px;">
                <div class="box-create-new">
                    <div class="box-mas">
                        <img class="mas" src="assets/img/mas.svg" alt="">
                    </div>
                    <a class="btn-nuevo-cliente" (click)="openDrawerRigth(true, 'create')">Nuevo catálogo</a>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3 catalogo-column" *ngFor="let catalogo of catalogos">
                <div id="{{catalogo.id_catalogo}}-box-catalogo" class="box-catalogo">
                    <div (click)="closeCatOptions(catalogo.id_catalogo)" id="{{catalogo.id_catalogo}}-overblock" class="overblock"></div>
                    <div class="box-imagen-estado-descuento" style="background: url({{catalogo.imagen}});">
                        <!-- <img (click)="verDetalle()" src="" alt=""> -->
                        <div class="estado">{{catalogo.estado}}</div>
                        <div class="descuento" *ngIf="catalogo.descuento != null">-{{catalogo.descuento}}%</div>
                    </div>
                    <div class="box-titulo-cantidad-opciones">
                        <div class="info">
                            <h3>{{catalogo.titulo}}</h3>
                            <p>{{catalogo.cantidad}} Productos</p>
                        </div>
                        <div (click)="showCatOptions(catalogo.id_catalogo)" class="opciones">
                            <button mat-icon-button aria-label="Menu opciones">
                                <mat-icon>more_vert</mat-icon>
                            </button>
                        </div>
                    </div>
                    <!-- pop up opciones -->
                    <ul>
                        <li class="btn-options">
                            <a (click)="editCatalogo(catalogo)">
                                <img class="icon-edit" src="assets/img/editar.svg" alt="">Editar
                            </a>
                        </li>
                        <li class="btn-options">
                            <a><img src=""> Exportar</a>
                        </li>
                        <li class="btn-options">
                            <a (click)="deleteCatalogo(catalogo.id_catalogo)"><img src=""> Eliminar
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>