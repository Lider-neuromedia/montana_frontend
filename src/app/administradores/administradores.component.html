<app-header></app-header>

<div id="wrapper">
    <div class="opciones">
        <app-menu></app-menu>
    </div>
    <div class="contenido">
        <div class="overview" (click)="cerrarFormAdmin()"></div>
        <div class="overview2" (click)="cerrarFormAdminEditar()"></div>

        <div class="nuevo-administrador">
            <div class="header-form">
                <h2>Nuevo administrador</h2>
                <img (click)="cerrarFormAdmin()" class="cerrar-form-admin" src="{{ templateImage.btnCerrar }}" alt="">
            </div>
            <form (ngSubmit)="agregarAdmin()" [formGroup]="formCreateAdmin">
                <h3 class="datos-generales">Datos generales</h3>
                <div class="label-field">
                    <label for="">Nombre completo</label>
                    <input name="name" type="text" formControlName="name" [class.is-invalid]="nameNoValid">
                    <small class="form-text text-danger animated fadeIn" *ngIf="nameNoValid">
                        El nombre es obligatorio
                    </small>
                </div>
                <div formGroupName="userdata">
                    <div class="label-field">
                        <label for="">Apellidos</label>
                        <input name="apellidos" type="text" formControlName="apellidos" [class.is-invalid]="apellidosNoValid">
                        <small class="form-text text-danger animated fadeIn" *ngIf="apellidosNoValid">
                            El apellido es obligatorio
                        </small>
                    </div>
                    <div class="label-field">
                        <label for="">Teléfono</label>
                        <input name="telefono" type="number" formControlName="telefono" [class.is-invalid]="telefonoNoValid">
                        <small class="form-text text-danger animated fadeIn" *ngIf="telefonoNoValid">
                            El teléfono es obligatorio
                        </small>
                    </div>
                </div>
                <div class="label-field">
                    <label for="">Correo electrónico</label>
                    <input name="email" type="email" formControlName="email" [class.is-invalid]="emailNoValid">
                    <small class="form-text text-danger animated fadeIn" *ngIf="emailNoValid">
                        El correo es obligatorio
                    </small>
                </div>
                <div class="label-field">
                    <label for="">Password</label>
                    <input name="password" type="password" formControlName="password" [class.is-invalid]="passNoValid">
                    <small class="form-text text-danger animated fadeIn" *ngIf="passNoValid">
                        El password es obligatorio
                    </small>
                </div>
            </form>
            <div class="acciones-form-adminitrador">
                <a (click)="agregarAdmin()" class="agregar">
                    <span class="mas">
                        <img src="" alt="">
                    </span> Agregar
                </a>
                <a class="cancelar" (click)="cerrarFormAdmin()">
                    <span class="mas">
                        <img src="" alt="">
                    </span> Cancelar
                </a>
            </div>
        </div>

        <div class="editar-administrador">
            <div class="header-form">
                <h2>Editar administrador</h2>
                <img (click)="cerrarFormAdminEditar()" class="cerrar-form-admin" src="{{ templateImage.btnCerrar }}" alt="">
            </div>
            <form (ngSubmit)="updatedAdmin()" [formGroup]="formUpdatedAdmin">
                <h3 class="datos-generales">Datos generales</h3>
                <!-- <div *ngFor="let userAdmins of check_user">
                    <label for="userAdmin">{{ userAdmins.name }}</label>
                    <input name="{{ userAdmins.name }}" type="text" formControlName="{{ userAdmins.name }}" value="{{ check_user.name }}" placeholder="{{ check_user.name }}">
                </div> -->
                <!-- <div *ngFor="let data of check_user"> -->
                <!-- </div> -->
                <!-- {{user_data}} -->
                <div class="label-field">
                    <label for="">Nombre completo</label>
                    <input name="name" type="text" formControlName="name" [class.is-invalid]="nameUpdatedNoValid" value="{{ check_user['name'] }}" placeholder="{{ check_user['name'] }}">
                    <small class="form-text text-danger animated fadeIn" *ngIf="nameUpdatedNoValid">
                        El nombre es obligatorio
                    </small>
                </div>
                <div class="label-field">
                    <label for="">Apellidos</label>
                    <input name="apellidos" type="text" formControlName="apellidos" [class.is-invalid]="apellidosUpdatedNoValid" value="{{ check_user.apellidos }}" placeholder="{{ check_user.apellidos }}">
                    <small class="form-text text-danger animated fadeIn" *ngIf="apellidosUpdatedNoValid">
                        El apellido es obligatorio
                    </small>
                </div>
                <div class="label-field">
                    <label for="">Correo eletrónico</label>
                    <input name="email" type="text" formControlName="email" [class.is-invalid]="emailUpdatedNoValid" value="{{ check_user.email }}" placeholder="{{ check_user.email }}">
                    <small class="form-text text-danger animated fadeIn" *ngIf="apellidosUpdatedNoValid">
                        El correo electrónico es obligatorio
                    </small>
                </div>
                <div *ngFor="let data of check_user.user_data" class="label-field">
                    <label for="">{{ data.field_key }}</label>
                    <input name="{{ data.field_key }}" type="text" value="{{ data.value_key }}" placeholder="{{ data.value_key }}">
                </div>

                <!-- <div class="label-field">
                    <label for="">Nombre completo</label>
                    <input name="name" type="text" formControlName="name" [class.is-invalid]="nameUpdatedNoValid" value="{{ check_user.name }}" placeholder="{{ check_user.name }}">
                    <small class="form-text text-danger animated fadeIn" *ngIf="nameUpdatedNoValid">
                        El nombre es obligatorio
                    </small>
                </div>
                <div formArrayName="user_data" *ngFor="let user of formUpdatedAdmin; let i = index;">
                    {{ user }}
                    <div class="label-field">
                        <label for="">Apellidos</label>
                        <input name="apellidos" type="text" formControlName="apellidos" [class.is-invalid]="apellidosUpdatedNoValid">
                        <small class="form-text text-danger animated fadeIn" *ngIf="apellidosUpdatedNoValid">
                                El apellido es obligatorio
                            </small>
                    </div>
                    <div class="label-field">
                        <label for="">Teléfono</label>
                        <input name="telefono" type="number" formControlName="telefono" [class.is-invalid]="telefonoUpdatedNoValid">
                        <small class="form-text text-danger animated fadeIn" *ngIf="telefonoUpdatedNoValid">
                                El teléfono es obligatorio
                            </small>
                    </div>

                </div>
                <div class="label-field">
                    <label for="">Correo electrónico</label>
                    <input name="email" type="email" formControlName="email" [class.is-invalid]="emailUpdatedNoValid" value="{{ check_user.email }}" placeholder="{{ check_user.email }}">
                    <small class="form-text text-danger animated fadeIn" *ngIf="emailUpdatedNoValid">
                        El correo es obligatorio
                    </small>
                </div>
                <div class="label-field">
                    <label for="">Password</label>
                    <input name="password" type="password" formControlName="password" [class.is-invalid]="passUpdatedNoValid">
                    <small class="form-text text-danger animated fadeIn" *ngIf="passUpdatedNoValid">
                        El password es obligatorio
                    </small>
                </div> -->
            </form>
            <div class="acciones-form-adminitrador">
                <a (click)="updatedAdmin()" class="agregar">
                    <span class="mas">
                        <img src="" alt="">
                    </span> Agregar
                </a>
                <a class="cancelar" (click)="cerrarFormAdminEditar()">
                    <span class="mas">
                        <img src="" alt="">
                    </span> Cancelar
                </a>
            </div>
        </div>

        <div class="filtros">
            <div class="box-buscador">
                <img class="lupa" src="{{ templateImage.lupa }}" alt="">
                <input [(ngModel)]="buscador" name="buscador" class="buscador" type="text" (keyup.enter)="buscarAdmin(buscarTexto.value)" #buscarTexto>
                <button type="button" class="hidden"></button>
            </div>

            <div (click)="accionesAdministrador()" class="box-editar">
                <!-- <div class="icono-editar">
                    <img src="{{ templateImage.lapiz }}" alt="">
                </div> -->
                <p class="texto-editar">Acción de</p>
                <div class="icono-puntos">
                    <img src="{{ templateImage.points }}" alt="">
                </div>

                <ul class="acciones-administrador">
                    <li (click)="editarAdmin()" [ngClass]="active"><img src="{{ templateImage.lapiz }}" alt=""> Editar</li>
                    <li><img src="{{ templateImage.exportar }}" alt=""> Exportar</li>
                    <li (click)="getUsersAndDelete()"><img src="{{ templateImage.eliminar }}" alt=""> Eliminar</li>
                </ul>
            </div>

            <div class="box-create-new">
                <div class="box-mas">
                    <img class="mas" src="{{ templateImage.mas }}" alt="">
                </div>
                <a class="btn-nuevo-cliente" (click)="nuevoAdmin()">Nuevo administrador</a>
            </div>
        </div>


        <section class="table-data">
            <table style="width:100%">

                <tr class="tabla-fila-cabecera">
                    <th></th>
                    <!-- <th style="padding-left: 95px;">Nombre <img src="{{ templateImage.ordenar }}" alt=""></th>
                    <th>Cel <img src="{{ templateImage.ordenar }}" alt=""></th>
                    <th>Correo <img src="{{ templateImage.ordenar }}" alt=""></th> -->
                    <th>
                        Nombre completo <img src="{{ templateImage.ordenar }}" alt="">
                    </th>
                    <th>
                        Apellidos <img src="{{ templateImage.ordenar }}" alt="">
                    </th>
                    <th *ngFor="let data of user_data">
                        {{ data }} <img src="{{ templateImage.ordenar }}" alt="">
                    </th>
                    <th>
                        Email <img src="{{ templateImage.ordenar }}" alt="">
                    </th>
                </tr>

                <!-- TABLA DINÁMICA -->
                <!-- <tr *ngFor="let usuario of usersAdmins" class="tabla-fila-datos">
                    <td><input (click)="removeUsers(usuario.id)" class="check-nombre" type="checkbox" name="check[]" id=""></td>
                    <td (click)="administradorDetalle(usuario.id)" class="imagen-nombre">
                        <img class="imagen" src="/assets/img/iniciales_dm_rojo.svg" alt="">
                        <p class="nombre">{{ usuario.name }}</p>
                    </td>
                    <td (click)="administradorDetalle(usuario.id)" class="telefono">{{ usuario.value_key }}</td>
                    <td (click)="administradorDetalle(usuario.id)" class="correo">{{ usuario.email }}</td>
                </tr> -->
                <tr *ngFor="let usuario of usersAdmins | paginate: { itemsPerPage: 5, currentPage: current }" class="tabla-fila-datos">
                    <td class="text-center">
                        <input (change)="checkAdmin($event, usuario, active)" class="check-nombre" type="checkbox" name="check[]" value="{{ usuario.id }}">
                    </td>
                    <td (click)="administradorDetalle(usuario.id)" class="imagen-nombre">
                        <img class="imagen" src="/assets/img/iniciales_dm_rojo.svg" alt="">
                        <p class="nombre">{{ usuario.name }}</p>
                    </td>
                    <td>
                        <p class="apelidos">{{ usuario.apellidos }}</p>
                    </td>
                    <td *ngFor="let data of usuario.user_data">
                        {{ data.value_key }}
                    </td>
                    <!-- <td class="telefono">{{ usuario.value_key }}</td> -->
                    <td class="correo">{{ usuario.email }}</td>
                </tr>
            </table>
            <div class="pt-3 pb-3 pagination">
                <pagination-controls (pageChange)="current = $event" previousLabel="Antes" nextLabel="Después" responsive="true"></pagination-controls>
            </div>
        </section>

        <!-- <div class="paginador">
    <ul class="pages">
        <li>atrás</li>
        <li><a href="">1</a></li>
        <li><a href="">2</a></li>
        <li><a href="">3</a></li>
        <li>adelante</li>
    </ul>
</div> -->
    </div>
</div>