<app-header></app-header>
<app-dialog-pedido [id_catalogo]="producto.catalogo" [id_producto]="producto.id_producto"></app-dialog-pedido>

<div class="workplace">
    <div class="slide-menu">
        <app-menu></app-menu>
    </div>
    <div class="area">
        <!-- <router-outlet></router-outlet> -->
        <div class="row">
            <div class="filtros" style="margin-bottom: 15px;">
                <div  (click)="accionesAdministrador()" style="height: 31px;" class="box-editar">
                    <!-- <div class="icono-editar">
                        <img src="{{ templateImage.lapiz }}" alt="">
                    </div> -->
                    <span class="puntero">Acción de</span>
                    <div class="icono-puntos">
                        <img src="./assets/img/edit_points.svg" alt="">
                    </div>
    
                    <ul class="acciones-administrador">
                        <li class="puntero" (click)="openDrawerRigth(true, 'edit')">
                            <img src="./assets/img/editar.svg" alt=""> Editar
                        </li>
                        <li class="puntero" (click)="deleteProduct()"><img src="./assets/img/icons-filter/trash.svg" alt=""> Eliminar</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-8">
                <div class="content-gallery">
                    <!-- <img src="{{producto.destacada}}" alt=""> -->
                    <ngx-gallery [options]="galleryOptions" [images]="galleryImages" class="ngx-gallery"></ngx-gallery>
                </div>

                <div class="detalle">
                    <h2 class="title-detalle">Detalles</h2>
                    <ul class="bullet-rojo">
                        <li>Sistema de amarre de cordones</li>
                        <li>Exterior tejido con refuerzos de TPU</li>
                        <li>Diseño ajustado y elástico</li>
                        <li>Mediasuela receptiva Boost</li>
                        <li>Suela de caucho</li>
                        <li>Tenis urbanos icónicos</li>
                        <li>Color del artículo: Core Black</li>
                    </ul>
                </div>

                <div class="opiniones">
                    <div class="row">
                        <div class="col-md-7">
                            <div class="valoracion-column pad-30">
                                <h3 class="valorar-title">Valorar producto</h3>
                                <ul class="qya-list" *ngIf="preguntas.length > 0; else preguntaNoExiste">
                                    <li *ngFor="let pregunta of preguntas">
                                        {{pregunta.pregunta}}
                                        <div class="strellas-valoracion">
                                            <mat-icon [ngClass]="{'star-active' : pregunta.respuesta >= 1, 
                                                'star-inactive' : pregunta.respuesta < 1}" 
                                            (click)="pregunta.respuesta = 1">star</mat-icon>
                                            <mat-icon [ngClass]="{'star-active' : pregunta.respuesta >= 2, 
                                                'star-inactive' : pregunta.respuesta < 2}" 
                                            (click)="pregunta.respuesta = 2">star</mat-icon>
                                            <mat-icon [ngClass]="{'star-active' : pregunta.respuesta >= 3, 
                                                'star-inactive' : pregunta.respuesta < 3}" 
                                            (click)="pregunta.respuesta = 3">star</mat-icon>
                                            <mat-icon [ngClass]="{'star-active' : pregunta.respuesta >= 4, 
                                                'star-inactive' : pregunta.respuesta < 4}" 
                                            (click)="pregunta.respuesta = 4">star</mat-icon>
                                            <mat-icon [ngClass]="{'star-active' : pregunta.respuesta >= 5, 
                                                'star-inactive' : pregunta.respuesta < 5}"  
                                            (click)="pregunta.respuesta = 5">star</mat-icon>
                                        </div>
                                    </li>
                                    <div style="display: flex; justify-content: center;">
                                        <button class="calificar" (click)="createCalificacion()" *ngIf="!respuesta_usuario; else califica">
                                            Calificar
                                        </button>
                                        <ng-template #califica>
                                            <button class="calificar disabled" disabled>
                                                Calificar
                                            </button>
                                        </ng-template>
                                    </div>
                                </ul>
                                <ng-template #preguntaNoExiste>
                                    <div class="col-md-12 text-center no-products">
                                        <p>
                                            <mat-icon style="font-size: 70px;margin-left: -100%;">sentiment_dissatisfied</mat-icon>
                                        </p>
                                        <h3>No has registrado productos aun...</h3>
                                    </div>
                                </ng-template>
                            </div>
                        </div>
                        <div class="col-md-5">
                            <div class="valoraciones-column">
                                <h3 class="valoraciones-title">Otras valoraciones</h3>
                                <div class="example-table-container">
                                    <table mat-table [dataSource]="dataSource">
                                        <ng-container matColumnDef="valoraciones">
                                            <th *matHeaderCellDef></th>
                                            <td mat-cell *matCellDef="let valoracion">
                                                <p class="font-weight-bold">{{ valoracion.pregunta }}</p>
                                                <star-rating value="5"
                                                 totalstars="5"
                                                 checkedcolor="red"
                                                 uncheckedcolor="black"
                                                 size="24px"
                                                 readonly="false"></star-rating>
                                                 <div class="strellas-valoracion">
                                                    <mat-icon [ngClass]="{'star-active' : valoracion.respuesta >= 1, 
                                                        'star-inactive' : valoracion.respuesta < 1}">star</mat-icon>
                                                    <mat-icon [ngClass]="{'star-active' : valoracion.respuesta >= 2, 
                                                        'star-inactive' : valoracion.respuesta < 2}">star</mat-icon>
                                                    <mat-icon [ngClass]="{'star-active' : valoracion.respuesta >= 3, 
                                                        'star-inactive' : valoracion.respuesta < 3}">star</mat-icon>
                                                    <mat-icon [ngClass]="{'star-active' : valoracion.respuesta >= 4, 
                                                        'star-inactive' : valoracion.respuesta < 4}" >star</mat-icon>
                                                    <mat-icon [ngClass]="{'star-active' : valoracion.respuesta >= 5, 
                                                        'star-inactive' : valoracion.respuesta < 5}">star</mat-icon>
                                                </div>
                                            </td>
                                        </ng-container>
                                        <tr mat-header-row *matHeaderRowDef="columns"></tr>
                                        <tr mat-row *matRowDef="let row; columns: columns"></tr>
                                    </table>
                                </div>
                                <!-- <small class="total-comentarios">12 comentarios</small> -->

                                <!-- <div class="user-feedback">
                                    <p>Excelentes zapatillas</p>
                                    <div class="strellas-valoracio">
                                        <img src="assets/img/start-on.svg" alt="">
                                        <img src="assets/img/start-on.svg" alt="">
                                        <img src="assets/img/start-on.svg" alt="">
                                        <img src="assets/img/start-on.svg" alt="">
                                        <img src="assets/img/start-on.svg" alt="">
                                    </div>
                                </div>

                                <div class="user-feedback">
                                    <p>Excelentes zapatillas</p>
                                    <div class="strellas-valoracio">
                                        <img src="assets/img/start-on.svg" alt="">
                                        <img src="assets/img/start-on.svg" alt="">
                                        <img src="assets/img/start-on.svg" alt="">
                                        <img src="assets/img/start-on.svg" alt="">
                                        <img src="assets/img/start-on.svg" alt="">
                                    </div>
                                </div>

                                <div class="user-feedback">
                                    <p>Excelentes zapatillas</p>
                                    <div class="strellas-valoracio">
                                        <img src="assets/img/start-on.svg" alt="">
                                        <img src="assets/img/start-on.svg" alt="">
                                        <img src="assets/img/start-on.svg" alt="">
                                        <img src="assets/img/start-on.svg" alt="">
                                        <img src="assets/img/start-on.svg" alt="">
                                    </div>
                                </div>

                                <div class="user-feedback">
                                    <p>Excelentes zapatillas</p>
                                    <div class="strellas-valoracio">
                                        <img src="assets/img/start-on.svg" alt="">
                                        <img src="assets/img/start-on.svg" alt="">
                                        <img src="assets/img/start-on.svg" alt="">
                                        <img src="assets/img/start-on.svg" alt="">
                                        <img src="assets/img/start-on.svg" alt="">
                                    </div>
                                </div>
                                <a href="#" class="ver-valoraciones">
                                    Ver más
                                </a> -->
                            </div>

                        </div>
                    </div>
                </div>


            </div>
            <div class="col-md-4">
                <div class="aside-detalle-producto">
                    <h2 class="nombre">{{producto.nombre}}</h2>
                    <p class="marca">{{producto.nombre_marca}}</p>
                    <p class="precio-descuento">{{producto.total  |currency:'COP':'symbol-narrow' :'1.0-0'}}</p>
                    <!-- <p class="precio-normal"></p> -->

                    <p class="codigo">Código</p>
                    <p class="numero-codigo">{{producto.codigo}}</p>

                    <p class="referencia">Referencia</p>
                    <p class="numero-referencia">{{producto.referencia}}</p>

                    <p class="stock">Stock</p>
                    <p class="numero-stock mrg-btn-30">{{producto.stock}} pares</p>

                    <!-- Footer actions. -->
                    <div class="acciones">
                        <!-- <button mat-raised-button (click)="openDialogPedido()" class="btn-agregar"><mat-icon>add_circle_outline</mat-icon>Agregar Pedido</button> -->
                        <a class="agregar" style="width: 180px;" (click)="openDialogPedido()">
                            Agregar Pedido
                            <div class="box-mas">
                                <!-- <img class="mas" src="./assets//img/mas.svg" alt=""> -->
                                <mat-icon class="mas" style="font-size: 15px;margin-top: 10%;">add</mat-icon>
                            </div>
                            
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- DRAWER EDITAR PRODUCTO. -->
        <app-drawer-rigth name="edit-producto" title="Editar producto" [open]="openDrawer"
        (close)="openDrawerRigth(false, 'edit')" (submit)="submitEditProduct()">
            <form>
                <div class="label-field">
                    <label for="">Nombres</label>
                    <input [(ngModel)]="producto.nombre" name="nombre" type="text" class="">
                </div>
                <div class="label-field">
                    <label for="">Código</label>
                    <input [(ngModel)]="producto.codigo" name="codigo" type="text" class="">
                </div>
                <div class="label-field">
                    <label for="">Referencia</label>
                    <input [(ngModel)]="producto.referencia" name="referencia" type="text" class="">
                </div>
                <div class="label-field">
                    <label for="">Stock</label>
                    <input [(ngModel)]="producto.stock" name="stock" type="number" class="">
                </div>
                <div class="label-field">
                    <label for="">Marca</label>
                    <input [(ngModel)]="producto.marca" name="marca" type="text" class="">
                </div>
                <div class="label-field">
                    <label for="">Precio</label>
                    <input [(ngModel)]="producto.precio" name="precio" type="number" class="">
                </div>
                <div class="label-field">
                    <label for="">Descripción</label>
                    <textarea [(ngModel)]="producto.descripcion" name="descripcion" class="text-area">
                    </textarea>
                </div>

                <div class="label-field" style="display: flex;">
                    <div class="col-md-6">
                        <label for="">Imagen destacada</label>
                        <div class="custom-dropzone" ngx-dropzone [accept]="'image/*'" [multiple]="false"
                            (change)="onSelect($event, 'files_1')">
                            <ngx-dropzone-label>
                                <div>
                                    <img src="{{producto.imagenes[0].image}}" alt="" *ngIf="producto.imagenes[0]">
                                    <div *ngIf="!producto.imagenes[0]">
                                        <h6>Suelta los archivos aquí o haz clic para subirlos...</h6>
                                        <mat-icon aria-hidden="false" aria-label="Camera icon" style="font-size: 50px;">photo_camera</mat-icon>
                                    </div>
                                </div>
                            </ngx-dropzone-label>
                            <ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files_1"
                                [file]="f" [removable]="true" (removed)="onRemove(f)">
                                <ngx-dropzone-label>({{ f.type }})</ngx-dropzone-label>
                            </ngx-dropzone-image-preview>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label for="">Imagen destacada</label>
                        <div class="custom-dropzone" ngx-dropzone [accept]="'image/*'" [multiple]="false"
                            (change)="onSelect($event,'files_2')">
                            <ngx-dropzone-label>
                                <div>
                                    <img src="{{producto.imagenes[1].image}}" alt="" *ngIf="producto.imagenes[1]">
                                    <div *ngIf="!producto.imagenes[1]">
                                        <h6>Suelta los archivos aquí o haz clic para subirlos...</h6>
                                        <mat-icon aria-hidden="false" aria-label="Camera icon" style="font-size: 50px;">photo_camera</mat-icon>
                                    </div>
                                </div>
                            </ngx-dropzone-label>
                            <ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files_2"
                                [file]="f" [removable]="true" (removed)="onRemove(f)">
                                <ngx-dropzone-label>({{ f.type }})</ngx-dropzone-label>
                            </ngx-dropzone-image-preview>
                        </div>
                    </div>
                </div>

                <div class="label-field" style="display: flex;">
                    <div class="col-md-6">
                        <div class="custom-dropzone" ngx-dropzone [accept]="'image/*'" [multiple]="false"
                            (change)="onSelect($event,'files_3')">
                            <ngx-dropzone-label>
                                <div>
                                    <img src="{{producto.imagenes[2].image}}" alt="" *ngIf="producto.imagenes[2]">
                                    <div *ngIf="!producto.imagenes[2]">
                                        <h6>Suelta los archivos aquí o haz clic para subirlos...</h6>
                                        <mat-icon aria-hidden="false" aria-label="Camera icon" style="font-size: 50px;">photo_camera</mat-icon>
                                    </div>
                                </div>
                            </ngx-dropzone-label>
                            <ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files_3"
                                [file]="f" [removable]="true" (removed)="onRemove(f)">
                                <ngx-dropzone-label>({{ f.type }})</ngx-dropzone-label>
                            </ngx-dropzone-image-preview>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="custom-dropzone" ngx-dropzone [accept]="'image/*'" [multiple]="false"
                            (change)="onSelect($event,'files_4')">
                            <ngx-dropzone-label>
                                <div>
                                    <img src="{{producto.imagenes[3].image}}" alt="" *ngIf="producto.imagenes[3]">
                                    <div *ngIf="!producto.imagenes[3]">
                                        <h6>Suelta los archivos aquí o haz clic para subirlos...</h6>
                                        <mat-icon aria-hidden="false" aria-label="Camera icon" style="font-size: 50px;">photo_camera</mat-icon>
                                    </div>
                                </div>
                            </ngx-dropzone-label>
                            <ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files_4"
                                [file]="f" [removable]="true" (removed)="onRemove(f)">
                                <ngx-dropzone-label>({{ f.type }})</ngx-dropzone-label>
                            </ngx-dropzone-image-preview>
                        </div>
                    </div>
                </div>

                <div class="label-field" style="display: flex;">
                    <div class="col-md-6">
                        <div class="custom-dropzone" ngx-dropzone [accept]="'image/*'" [multiple]="false"
                            (change)="onSelect($event,'files_5')">
                            <ngx-dropzone-label>
                                <div>
                                    <img src="{{producto.imagenes[4].image}}" alt="" *ngIf="producto.imagenes[4]">
                                    <div *ngIf="!producto.imagenes[4]">
                                        <h6>Suelta los archivos aquí o haz clic para subirlos...</h6>
                                        <mat-icon aria-hidden="false" aria-label="Camera icon" style="font-size: 50px;">photo_camera</mat-icon>
                                    </div>
                                </div>
                            </ngx-dropzone-label>
                            <ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files_5"
                                [file]="f" [removable]="true" (removed)="onRemove(f)">
                                <ngx-dropzone-label>({{ f.type }})</ngx-dropzone-label>
                            </ngx-dropzone-image-preview>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="custom-dropzone" ngx-dropzone [accept]="'image/*'" [multiple]="false"
                            (change)="onSelect($event,'files_6')">
                            <ngx-dropzone-label>
                                <div>
                                    <img src="{{producto.imagenes[5].image}}" alt="" *ngIf="producto.imagenes[5]">
                                    <div *ngIf="!producto.imagenes[5]">
                                        <h6>Suelta los archivos aquí o haz clic para subirlos...</h6>
                                        <mat-icon aria-hidden="false" aria-label="Camera icon" style="font-size: 50px;">photo_camera</mat-icon>
                                    </div>
                                </div>
                            </ngx-dropzone-label>
                            <ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files_6"
                                [file]="f" [removable]="true" (removed)="onRemove(f)">
                                <ngx-dropzone-label>({{ f.type }})</ngx-dropzone-label>
                            </ngx-dropzone-image-preview>
                        </div>
                    </div>
                </div>
            </form>
        </app-drawer-rigth>
    </div>
</div>