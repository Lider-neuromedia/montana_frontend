<app-header></app-header>

<div id="wrapper">
    <div class="opciones">
        <app-menu></app-menu>
    </div>
    <div class="contenido">

        <div class="filtros">
            <div class="box-buscador">
                <img class="lupa" src="assets/img/search.svg" alt="">
                <input name="buscador" class="buscador" type="text">
                <button type="button" class="hidden"></button>
            </div>

            <div class="box-create-new">
                <div class="box-mas">
                    <img class="mas" src="assets/img/mas.svg" alt="">
                </div>
                <a class="btn-nuevo-cliente" data-toggle="modal" data-target="#crearPqrs">Nuevo PQRS</a>
            </div>
        </div>


        <section class="table-data">
            <table class="table">
                <thead>
                    <tr class="tabla-fila-cabecera">
                        <th>
                            #Ticket
                        </th>   
                        <th>
                            Fecha de registro
                        </th>
                        <th>
                            Cliente
                        </th>
                        <th>
                            Vendedor
                        </th>
                        <th>
                            Estado
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let pqr of pqrs | paginate: { itemsPerPage: itemPerPage, currentPage: current }" class="tabla-fila-datos">
                        <td (click)="redirectDetalle(pqr.id_pqrs)">#{{pqr.codigo}}</td>
                        <td (click)="redirectDetalle(pqr.id_pqrs)">{{pqr.fecha_registro}}</td>
                        <td (click)="redirectDetalle(pqr.id_pqrs)">{{pqr.name_cliente + ' ' + pqr.apellidos_cliente}}</td>
                        <td (click)="redirectDetalle(pqr.id_pqrs)">{{pqr.name_vendedor + ' ' + pqr.apellidos_vendedor}}</td>
                        <td (click)="redirectDetalle(pqr.id_pqrs)">{{pqr.estado}}</td>
                    </tr>
                </tbody>
            </table>
        </section>
    </div>
</div>

  <!-- Modal crear solicitud -->
  <div class="modal fade" id="crearPqrs" tabindex="-1" aria-labelledby="crearPqrs" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-body">
            <form (submit)="submitCretePqrs()">
                <p class="title-solicitud">Nuevo PQRS</p>
                <div class="label-field">
                    <label >Vendedor</label>
                    <select name="vendedor" [(ngModel)]="createPqrs.vendedor" [ngModelOptions]="{standalone: true}">
                        <option value="">Seleccione...</option>
                        <option *ngFor="let vendedor of vendedores" [value]="vendedor.id">
                            {{vendedor.name + ' ' + vendedor.apellidos}}
                        </option>
                    </select>
                </div>
                <div class="label-field">
                    <label >cliente</label>
                    <select name="cliente" [(ngModel)]="createPqrs.cliente" [ngModelOptions]="{standalone: true}">
                        <option value="">Seleccione...</option>
                        <option *ngFor="let cliente of clientes" [value]="cliente.id">
                            {{cliente.name + ' ' + cliente.apellidos}}
                        </option>
                    </select>
                </div>
                <div class="label-field">
                    <label >Tipo de PQRS</label>
                    <select name="tipo" [(ngModel)]="createPqrs.tipo" [ngModelOptions]="{standalone: true}">
                        <option value="">Seleccione...</option>
                        <option value="queja_retraso">Queja por retrasos</option>
                    </select>
                </div>

                <div class="label-field">
                    <label >Mensaje</label>
                    <textarea name="mensaje" class="text-area"  [(ngModel)]="createPqrs.mensaje" [ngModelOptions]="{standalone: true}">
                    </textarea>
                </div>
                
                <div class="enviar-solicitud">
                    <div class="box-create-new">
                        <div class="box-mas">
                            <img class="mas" src="assets/img/enviar.png" alt="">
                        </div>
                        <button type="submit" class="btn-enviar-solicitud">Enviar</button>
                    </div>
                </div>
            </form>
        </div>
      </div>
    </div>
</div>

<div class="footer">
    <div class="footer-paginate">
        <div class="pagination">
            <pagination-controls (pageChange)="current = $event" previousLabel="" nextLabel="" responsive="true"></pagination-controls>
        </div>
        <div class="label-field label-field-paginate">
            <select name="changeNumberPage" (change)="changeListPagination($event)" id="changeNumberPage" class="select-paginate">
                <option [value]="5"> 5 Por página </option>
                <option [value]="10"> 10 Por página </option>
                <option [value]="15"> 15 Por página </option>
                <option [value]="20"> 20 Por página </option>
                <option [value]="30"> 30 Por página </option>
            </select>
        </div>   
    </div>
</div>